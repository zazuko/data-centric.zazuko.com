"use strict";(self.webpackChunkdata_centric_zazuko_com=self.webpackChunkdata_centric_zazuko_com||[]).push([[350],{6930:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var t=n(5893),s=n(1151);const i={},c="Validate RDF Data Cubes",o={id:"cubes/how-to/validate-cube",title:"Validate RDF Data Cubes",description:"RDF Data Cubes can be validated in a number of ways:",source:"@site/docs/cubes/how-to/validate-cube.md",sourceDirName:"cubes/how-to",slug:"/cubes/how-to/validate-cube",permalink:"/docs/cubes/how-to/validate-cube",draft:!1,unlisted:!1,editUrl:"https://github.com/zazuko/data-centric.zazuko.com/tree/main/docs/cubes/how-to/validate-cube.md",tags:[],version:"current",frontMatter:{},sidebar:"cubesSidebar",previous:{title:"RDF Data Cubes",permalink:"/docs/cubes/"},next:{title:"Cube validation profiles",permalink:"/docs/cubes/explanations/profiles"}},r={},l=[{value:"Preparation",id:"preparation",level:2},{value:"Validate a cube from local file",id:"validate-a-cube-from-local-file",level:2},{value:"Cube metadata",id:"cube-metadata",level:3},{value:"Observations",id:"observations",level:3},{value:"Validate a cube from SPARQL endpoint",id:"validate-a-cube-from-sparql-endpoint",level:2}];function d(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.h1,{id:"validate-rdf-data-cubes",children:"Validate RDF Data Cubes"}),"\n",(0,t.jsx)(a.p,{children:"RDF Data Cubes can be validated in a number of ways:"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsx)(a.li,{children:"Check that observations are correct according to the cube's structure,"}),"\n",(0,t.jsx)(a.li,{children:"Check that the cube and its dimensions are correctly described according to a validation profile."}),"\n"]}),"\n",(0,t.jsxs)(a.p,{children:["Both tasks are accomplished using ",(0,t.jsx)(a.a,{href:"https://www.w3.org/TR/shacl/",children:"SHACL"}),", a W3C standard for validating RDF data."]}),"\n",(0,t.jsx)(a.h2,{id:"preparation",children:"Preparation"}),"\n",(0,t.jsx)(a.p,{children:"Install globally the barnard59 CLI and the cube plugin:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:"npm install -g barnard59 barnard59-cube\n"})}),"\n",(0,t.jsxs)(a.p,{children:["To verify correct installation run the command below which should print the available ",(0,t.jsx)(a.code,{children:"b59 cube"})," commands."]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:"b59 cube --help\n"})}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{children:"Usage: barnard59 cube [options] [command]\n\nOptions:\n  -V, --version                 output the version number\n  -h, --help                    display help for command\n\nCommands:\n  fetch-metadata [options]      Retrieves cube and its constraint shape from\n                                SPARQL endpoint\n  check-metadata [options]      Validate input cube and its constraint against\n                                profile shapes\n  fetch-observations [options]  Retrieves cube observations from SPARQL\n                                endpoint\n  check-observations [options]  Validate input observations against cube\n                                constraint\n  fetch-constraint [options]    Retrieves cube constraint from SPARQL endpoint\n  fetch-cube [options]          Retrieves cube with observations from SPARQL\n                                endpoint\n  help [command]                display help for command\n"})}),"\n",(0,t.jsx)(a.h2,{id:"validate-a-cube-from-local-file",children:"Validate a cube from local file"}),"\n",(0,t.jsx)(a.p,{children:"Validating a cube which is stored completely in single file may need additional steps to separate the cube metadata and observations."}),"\n",(0,t.jsxs)(a.p,{children:["Validating the observations is done by checking them against the ",(0,t.jsx)(a.a,{href:"https://cube.link/#constraints",children:"cube's constraint shape"}),"."]}),"\n",(0,t.jsxs)(a.p,{children:["Validating the cube metadata is done by checking it against a SHACL Shape called ",(0,t.jsx)(a.a,{href:"../explanations/profiles",children:"profile"}),"."]}),"\n",(0,t.jsx)(a.h3,{id:"cube-metadata",children:"Cube metadata"}),"\n",(0,t.jsx)(a.p,{children:"Small enough cube can be validated directly from the file which also includes all the observations."}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:"b59 cube check-metadata --profile https://cube.link/latest/shape/standalone-cube-constraint < cube.nt\n"})}),"\n",(0,t.jsx)(a.p,{children:"However, in case of large cubes, or sources which contain multiple cubes, the entire dataset will be unnecessarily loaded into memory. In such cases, it is better to separate the cube metadata from the observations. This can be done using a SPARQL query which removed the observation data from the cube."}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sparql",children:"PREFIX cube: <https://cube.link/>\n\nCONSTRUCT { \n  ?s ?p ?o . \n  ?ob cube:observedBy ?by .\n}\nwhere {\n  {\n    ?s ?p ?o .\n\n    FILTER NOT EXISTS {\n      ?s a cube:Observation .\n    }\n  }\n  UNION {\n    ?ob cube:observedBy ?by\n  }\n}\n"})}),"\n",(0,t.jsxs)(a.p,{children:["Save this file as ",(0,t.jsx)(a.code,{children:"separate-metadata.sparql"})," and use its output as input for the validation. To execute the query, ",(0,t.jsx)(a.a,{href:"https://jena.apache.org/documentation/query/",children:"Jena arq"})," can be used:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:"arq --query separate-metadata.sparql --data cube.nt | \\\n  b59 cube check-metadata --profile https://cube.link/latest/shape/standalone-cube-constraint\n"})}),"\n",(0,t.jsx)(a.h3,{id:"observations",children:"Observations"}),"\n",(0,t.jsx)(a.p,{children:"Similarly, the observations can be validated directly from the file which also includes the cube metadata."}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:"b59 cube check-observations --constraint cube.nt < cube.nt\n"})}),"\n",(0,t.jsx)(a.p,{children:"And again, when the input cube is large, it is better to separate the observations from the cube metadata. This can be done using a SPARQL query similar to that above:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sparql",children:"PREFIX cube: <https://cube.link/>\n\nCONSTRUCT { \n  ?s ?p ?o . \n  ?ob cube:observedBy ?by .\n}\nwhere {\n  ?s ?p ?o .\n\n  FILTER NOT EXISTS {\n    ?s a cube:Observation .\n  }\n}\n"})}),"\n",(0,t.jsxs)(a.p,{children:["Save the output to a file and use it as the ",(0,t.jsx)(a.code,{children:"--constraint"})," argument for the validation:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:"arq --query separate-observations.sparql --data cube.nt > cube-constraint.nt\nb59 cube check-observations --constraint cube-constraint.nt < cube.nt\n"})}),"\n",(0,t.jsx)(a.h2,{id:"validate-a-cube-from-sparql-endpoint",children:"Validate a cube from SPARQL endpoint"}),"\n",(0,t.jsx)(a.p,{children:"TBD"})]})}function h(e={}){const{wrapper:a}={...(0,s.a)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1151:(e,a,n)=>{n.d(a,{Z:()=>o,a:()=>c});var t=n(7294);const s={},i=t.createContext(s);function c(e){const a=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(i.Provider,{value:a},e.children)}}}]);