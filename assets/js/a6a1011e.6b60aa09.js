"use strict";(self.webpackChunkdata_centric_zazuko_com=self.webpackChunkdata_centric_zazuko_com||[]).push([[2127],{1273:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"apis/kopflos/how-to/parametrised-handlers","title":"Implement parametrised handlers","description":"Positional arguments","source":"@site/docs/apis/kopflos/how-to/parametrised-handlers.md","sourceDirName":"apis/kopflos/how-to","slug":"/apis/kopflos/how-to/parametrised-handlers","permalink":"/docs/apis/kopflos/how-to/parametrised-handlers","draft":false,"unlisted":false,"editUrl":"https://github.com/zazuko/data-centric.zazuko.com/tree/main/docs/apis/kopflos/how-to/parametrised-handlers.md","tags":[],"version":"current","frontMatter":{},"sidebar":"apisSidebar","previous":{"title":"Load API description","permalink":"/docs/apis/kopflos/how-to/load-api"},"next":{"title":"Serve virtual resources","permalink":"/docs/apis/kopflos/how-to/patterned-target"}}');var r=t(4848),s=t(8453);const o={},d="Implement parametrised handlers",i={},l=[{value:"Positional arguments",id:"positional-arguments",level:2},{value:"Named arguments",id:"named-arguments",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"implement-parametrised-handlers",children:"Implement parametrised handlers"})}),"\n",(0,r.jsx)(n.h2,{id:"positional-arguments",children:"Positional arguments"}),"\n",(0,r.jsx)(n.p,{children:"It is possible to parametrise a handler so that it can be more easily adapted to various use cases."}),"\n",(0,r.jsxs)(n.p,{children:["For example, a handler which runs queries could be configured to run against different\nendpoints configured in the app. To use such a handler, we can pass the endpoint as a parameter.\nThat is done by adding a list or object of ",(0,r.jsx)(n.code,{children:"code:arguments"})," property inside the implementation node."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-turtle",children:'PREFIX code: <https://code.described.at/>\nPREFIX kl: <https://kopflos.described.at/>\n\n[\n  a kl:Handler ;\n  code:implementedBy [\n    a code:EcamScriptModule ;\n    code:link <file:handler/query.js#runQuery> ;\n    code:arguments ( "wikidata" ) ;\n  ] ;\n] . \n'})}),"\n",(0,r.jsx)(n.p,{children:"The handler implementation can then access the arguments as a parameters passed to the handler factory."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// handler/query.js#runQuery\nimport type { Handler } from '@kopflos-cms/core' \n\nexport function runQuery (endpointName: string): Handler {\n  return ({ env }) => {\n    const endpoint = env.sparql[endpointName]\n    if (!endpoint) {\n      throw new Error(`Unknown endpoint: ${endpointName}`)\n    }\n    \n    // Run the query against the endpoint\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"named-arguments",children:"Named arguments"}),"\n",(0,r.jsx)(n.p,{children:"Named arguments are also supported."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-turtle",children:'PREFIX code: <https://code.described.at/>\nPREFIX arg: <https://code.described.at/argument#>\nPREFIX kl: <https://kopflos.described.at/>\n\n[\n  a kl:Handler ;\n  code:implementedBy [\n    a code:EcamScriptModule ;\n    code:link <file:handler/query.js#runQuery> ;\n    code:arguments [\n      arg:endpointName "wikidata" ;\n    ] ;\n  ] ;\n] . \n'})}),"\n",(0,r.jsx)(n.p,{children:"The handler implementation can then access the arguments as a parameters passed to the handler factory."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// handler/query.js#runQuery\nimport type { Handler } from '@kopflos-cms/core' \n\nexport function runQuery ({ endpointName }): Handler {\n  return ({ env }) => {\n    const endpoint = env.sparql[endpointName]\n    if (!endpoint) {\n      throw new Error(`Unknown endpoint: ${endpointName}`)\n    }\n    \n    // Run the query against the endpoint\n  }\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var a=t(6540);const r={},s=a.createContext(r);function o(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);